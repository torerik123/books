{% extends "layout.html" %}

{% block title %}
    {{ title }}
{% endblock %}

{% block main %}

{{ style_section | safe }}

    <div class="book-container">
        <div class="book-info-cover">
            <div class="cover"><img class="cover-img" id="cover-img"></div>
        </div>        
        <div class="book-info-content">
            <div class="book-info-col">
                <h1>{{ title }}, {{ year }}</h1>
                <div class="author-isbn">Author: <a href="#"><span class="author">{{ author }}</span></a> , <span class="book-isbn">ISBN: <span id="isbn">{{ isbn }}</span> </span> </div>
                <div class="rating">Rating: * * * * * </div>
                <p class="book-info-description">Lorem ipsum dolor sit amet 
                    Lorem ipsum dolor sit amet 
                    Lorem ipsum dolor sit amet 
                    Lorem ipsum dolor sit amet 
                    Lorem ipsum dolor sit amet 
                    Lorem ipsum dolor sit amet 
                    Lorem ipsum dolor sit amet 
                    Lorem ipsum dolor sit amet 
                    Lorem ipsum dolor sit amet    
                </p>
                
                <h2>Reviews</h2>
            
                {{ content_section | safe }}
            
            </div>
        </div>  
    </div>


<script>
    
    // Get cover on book info page
    document.addEventListener("DOMContentLoaded", () => {

    const isbn = document.querySelector("#isbn").innerHTML;

    const cover = document.querySelector("#cover-img");

    // Get JSON response from Google Books API
    fetch('https://www.googleapis.com/books/v1/volumes?q=isbn:' + isbn)
    .then(response => response.json())
    .then(data => {

    // Get thumbnail image
    const image = data['items'][0]['volumeInfo']['imageLinks']['thumbnail'];

    // Set cover to image link
    cover.src = image;
    });

    });
    
</script>
{% endblock %}